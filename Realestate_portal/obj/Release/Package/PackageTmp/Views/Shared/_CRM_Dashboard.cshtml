<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>@ViewBag.Title</title>
    <meta name="description" content="Premium Group Realty NY Agents Portal">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Google Fonts -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    <script>
        WebFont.load({
            google: { "families": ["Montserrat:400,500,600,700", "Noto+Sans:400,700"] },
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="~/Content/pgrlogos/S7VENStandalone.png">
    <link rel="icon" type="image/png" sizes="32x32" href="~/Content/pgrlogos/S7VENStandalone.png">
    <link rel="icon" type="image/png" sizes="16x16" href="~/Content/pgrlogos/S7VENStandalone.png">
    <!-- Stylesheet -->
    <link rel="stylesheet" href="~/Content/assets/vendors/css/base/bootstrap.min.css">
    <link rel="stylesheet" href="~/Content/assets/vendors/css/base/elisyam-1.5.1.css">
    <link rel="stylesheet" href="~/Content/assets/css/lity/lity.min.css">
    <link rel="stylesheet" href="~/Content/assets/css/owl-carousel/owl.carousel.min.css">
    <link rel="stylesheet" href="~/Content/assets/css/owl-carousel/owl.theme.min.css">

    <!-- Tweaks for older IEs-->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
    <style>
        .dataTables_filter {
            float: right !important;
        }
    </style>
</head>
<body id="page-top" class="new-body">
    <!-- Begin Preloader -->
    <div id="preloader">
        <div class="canvas">
            <img src="~/Content/pgrlogos/S7VENLogoBlack.png" alt="logo" class="loader-logo">
            <div class="spinner"></div>
        </div>
    </div>
    <!-- End Preloader -->
    <div class="page db-social">
        @Html.Partial("~/Views/Shared/Header_CRM.cshtml")
        <!-- Begin Header -->
        <!-- Begin Page Content -->
        <div class="page-content d-flex align-items-stretch">
            <div style="margin-top:20px" class="default-sidebar">
                <!-- Begin Side Navbar -->
                <nav class="side-navbar box-scroll sidebar-scroll">
                    @*<span class="heading mt-3">CRM</span>*@
                    <!-- New CRM Sidebar -->
                    <span class="heading">CRM FEATURES</span>
                    <ul list-unstyled">
                        @if (ViewBag.rol == "Agent")
                        {
                            <li class="inline"><a class="primary-color" href="@Url.Action("Customers","CRM")"><i class="la la-user-times primary-color"></i>Leads</a></li>
                        }
                        @if (ViewBag.rol == "Admin")
                        {
                            <li class="inline"><a class="primary-color" href="@Url.Action("Customers","CRM")"><i class="la la-users primary-color"></i>Leads</a></li>                           
                            <li class="inline"><a class="primary-color" href="@Url.Action("Index","Users",new { broker=ViewBag.selbroker})"><i class="la la-group primary-color"></i>Agents</a></li>

                        }
                        @if (ViewBag.rol == "SA")
                        {
                            <li class="inline"><a class="primary-color" href="@Url.Action("Customers","CRM")"><i class="la la-users primary-color"></i>Leads</a></li>                          
                            <li class="inline"><a class="primary-color" href="@Url.Action("Index","Users",new { broker=ViewBag.selbroker})"><i class="la la-group primary-color"></i>Agents</a></li>
                            <li class="inline"><a class="primary-color" href="@Url.Action("Brokers","Users",new { broker=ViewBag.selbroker})"><i class="la la-group primary-color"></i>Brokers</a></li>
                        }
                    </ul>
                    <!-- End New CRM Sidebar-->
                </nav>
                <!-- End Side Navbar -->
            </div>
            <!-- End Left Sidebar -->

            <div class="content-inner">
                @RenderBody()


                <!-- End Page Footer -->
                <a href="#" class="go-top"><i class="la la-arrow-up"></i></a>

                @Html.Partial("~/Views/Shared/Sidebarright.cshtml")
            </div>
            <!-- End Page Content -->


        </div>

    </div>
    <div id="modalNotifications" class="modal fade">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="titlenotification"></h4>
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">×</span>
                        <span class="sr-only">close</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">

                        <div class="col-12">
                            <label id="textnotification"></label>
                        </div>
                    </div>



                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-shadow" data-dismiss="modal">Close</button>

                </div>

            </div>
        </div>
    </div>
    <!-- Begin Vendor Js -->
    <script src="~/Content/assetsEditor/js/bootstrap.min.js"></script>
    <script src="~/Content/assetsEditor/js/popper.min.js"></script>
    <script src="~/Content/assets/vendors/js/base/jquery.min.js"></script>
    <script src="~/Content/assets/vendors/js/base/jquery.ui.min.js"></script>
    <script src="~/Content/assets/vendors/js/base/core.min.js"></script>
    <!-- End Vendor Js -->
    <!-- Begin Page Vendor Js -->
    <script src="~/Content/assets/vendors/js/nicescroll/nicescroll.min.js"></script>
    <script src="~/Content/assets/vendors/js/lity/lity.min.js"></script>

    <script src="~/Content/assets/vendors/js/owl-carousel/owl.carousel.min.js"></script>
    <!-- End Page Vendor Js -->
    <!-- Begin Page Snippets -->
    <script src="~/Content/assets/js/pages/newsfeed.min.js"></script>
    <script src="~/Content/assets/js/app/contact/contact.min.js"></script>
    <!-- End Page Snippets -->

    <script src="~/Content/assets/vendors/js/nicescroll/nicescroll.min.js"></script>
    <script src="~/Content/assets/vendors/js/calendar/moment.min.js"></script>
    <script src="~/Content/assets/vendors/js/calendar/fullcalendar.min.js"></script>
    <!-- End Page Vendor Js -->
    <script src="~/Content/assets/vendors/js/app/app.min.js"></script>
    <!-- Begin Page Snippets -->
    <script src="~/Content/assets/js/pages/events.min.js"></script>
    <!-- End Page Snippets -->

    <script>
        function shownotification(title, description) {

            $('#titlenotification').html(title);
            $('#textnotification').html(description);

        }

        $("#toggle-btn").click(function () {
            $(".side-navbar").toggle();
            $(".default-sidebar").toggle();

        });
    </script>

    @if (ViewBag.Title == "Premium Group Realty | Scheduler")
    {
        @Html.Partial("~/Views/Shared/Scheduler_script.cshtml")
    }


    <!-- Tooltip Initialisation -->
    <script src="~/Content/assets/vendors/js/datatables/datatables.min.js"></script>
    <script src="~/Content/assets/vendors/js/noty/noty.min.js"></script>
    @if (ViewBag.Title == "New Agent")
    {
        <script>
            $('#submitbuttoncreate').click(function (event) { // Vamos a bloquear enviar el formulario
                if ($("#checkemail").val() == "existe") {
                    event.preventDefault();

                    new Noty({
                        type: 'warning',
                        layout: 'topRight',
                        text: 'This email address was already registered',
                        progressBar: true,
                        timeout: 2500

                    }).show();
                    $("#Emailconst").val("");
                } else {

                }
            });
            $("#Emailconst").on('change', function () {
                var emailtocheck = $("#Emailconst").val();
                try {
                    $.ajax
                        ({
                            url: '/Portal/GetExistEmail',
                            type: 'POST',
                            datatype: 'application/json',
                            contentType: 'application/json',
                            data: JSON.stringify({
                                email: emailtocheck
                            }),
                            success: function (result) {
                                if (result == "si") {
                                    $("#checkemail").val("existe");

                                    new Noty({
                                        type: 'warning',
                                        layout: 'topRight',
                                        text: 'This email address was already registered',
                                        progressBar: true,
                                        timeout: 2500

                                    }).show();
                                    $("#Emailconst").val("");
                                } else if (result == "no") {
                                    $("#checkemail").val("no");
                                } else {
                                    alert("Something went wrong");
                                    $("#Emailconst").val("");
                                }
                            },
                            error: function () {
                                alert("Something went wrong")

                            },
                        });
                } catch {
                    alert("Something went wrong")
                }

            });




        </script>
    }
    @RenderSection("scripts", required: false);
</body>
</html>
